# debug workflow to create debug artifacts too for flutter apk, web and windows on push on debug branch
name: Debug

on:
  push:
    branches:
      - main

jobs:
    build:
        runs-on: ubuntu-latest
    
        steps:
        - uses: actions/checkout@v3

        - name: Test connection
          run: curl "https://storage.googleapis.com/flutter_infra_release/releases/releases_linux.json"
    
        - name: Set up Flutter
          uses: subosito/flutter-action@v2
          with:
            flutter-version: '3.24.3'
    
        - name: Install dependencies
          run: flutter pub get
    
        - name: Build APK
          run: flutter build apk --debug
    
        - name: Build Web
          run: flutter build web
    
        - name: Build Windows
          run: flutter build windows
    
        - name: Archive artifacts
          uses: actions/upload-artifact@v2
          with:
            name: debug-artifacts
